# üìò –ú–æ–¥—É–ª—å `window`

üí° –ü–æ–¥—Å–∏—Å—Ç–µ–º–∞ `window` –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–∫–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –û–Ω–∞ –Ω–µ
–∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ GUI-–±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤—ã–±–∏—Ä–∞–µ—Ç –Ω–∞—Ç–∏–≤–Ω—ã–π backend
–¥–ª—è —Ç–µ–∫—É—â–µ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã. –ï—Å–ª–∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –¥–≤–∏–∂–æ–∫ –≤ —Ä–µ–∂–∏–º–µ `headless`, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
–≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –∑–∞–≥–ª—É—à–∫–∞. API –º–æ–¥—É–ª—è –ø—É–±–ª–∏–∫—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ `core.expose("window", ...)`,
—á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–º–µ–Ω—è—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞, –∏—Å–ø–æ–ª—å–∑—É—é—â–µ–≥–æ –æ–∫–Ω–æ.

## üì¶ API

```python
init(title: str, width: int, height: int, fullscreen: bool = False,
     resizable: bool = True, borderless: bool = False)
```
–°–æ–∑–¥–∞—ë—Ç –æ–∫–Ω–æ —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏.

```python
create_window(title: str, width: int, height: int,
              fullscreen: bool = False, resizable: bool = True,
              borderless: bool = False) -> object
```
–°–æ–∑–¥–∞—ë—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–∫—Ç backend. –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è
`init()` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `create_window()` –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ –æ–∫–Ω–∞.
–ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –æ–∫–æ–Ω –∏ —É–ø—Ä–∞–≤–ª—è—Ç—å –∏–º–∏ –æ—Ç–¥–µ–ª—å–Ω–æ.

```python
poll_events()
```
–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è. –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–∑—ã–≤–∞—Ç—å –∫–∞–∂–¥—ã–π –∫–∞–¥—Ä.

```python
get_size() -> tuple[int, int]
```
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–µ–∫—É—â–∏–π —Ä–∞–∑–º–µ—Ä –æ–∫–Ω–∞.

```python
should_close() -> bool
```
–§–ª–∞–≥ –∑–∞–∫—Ä—ã—Ç–∏—è –æ–∫–Ω–∞.

```python
shutdown()
```
–ó–∞–∫—Ä—ã–≤–∞–µ—Ç –æ–∫–Ω–æ –∏ –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç —Ä–µ—Å—É—Ä—Å—ã.

```python
get_window_handle() -> Any
```
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–∞—Ç–∏–≤–Ω—ã–π –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä –æ–∫–Ω–∞ –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –≤ —Ä–µ–Ω–¥–µ—Ä.

```python
get_framebuffer() -> Optional[bytearray]
```
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Å—ã–ª–∫—É –Ω–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –±—É—Ñ–µ—Ä –æ–∫–Ω–∞, –µ—Å–ª–∏ –æ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ä–µ–Ω–¥–µ—Ä–æ–º. –í
—Ä–µ–∂–∏–º–µ headless –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤—ã–¥–µ–ª–µ–Ω–Ω—ã–π –±—É—Ñ–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –∑–∞–ø–æ–ª–Ω—è—Ç—å
—Ñ—É–Ω–∫—Ü–∏—è–º–∏ –∏–∑ `graphic` –∏ –∑–∞—Ç–µ–º –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –≤ `render.present()`.

```python
get_framebuffer_size() -> tuple[int, int]
```
–†–∞–∑–º–µ—Ä –æ–±–ª–∞—Å—Ç–∏ –≤—ã–≤–æ–¥–∞ –≤ –ø–∏–∫—Å–µ–ª—è—Ö. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–æ–¥—É–ª–µ–º `gfx` –¥–ª—è –ø–æ–¥–≥–æ–Ω–∫–∏
–≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –±—É—Ñ–µ—Ä–∞.

```python
get_dpi_scale() -> float
```
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–∞—Å—à—Ç–∞–± DPI –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –±–∞–∑–æ–≤–æ–≥–æ (1.0 = 96 DPI). –ù–∞ Windows
–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `GetDpiForWindow`, –≤ —Ä–µ–∂–∏–º–µ headless –≤—Å–µ–≥–¥–∞ `1.0`.

```python
set_fullscreen(True/False)
set_resolution(width, height)
```
–í–∫–ª—é—á–∞–µ—Ç –∏–ª–∏ –≤—ã–∫–ª—é—á–∞–µ—Ç –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º –∏ –∏–∑–º–µ–Ω—è–µ—Ç —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ. –≠—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–∏
—Ä–∞–±–æ—Ç–∞—é—Ç –Ω–∞ –≤—Å–µ—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ö, –≤ headless‚Äë—Ä–µ–∂–∏–º–µ –ø—Ä–æ—Å—Ç–æ –æ–±–Ω–æ–≤–ª—è—é—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ
–ø–æ–ª—è.

–ú–æ–¥—É–ª—å —Ç–∞–∫–∂–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç `calculate_viewport()` –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –∑–æ–Ω—ã —Å
—É—á—ë—Ç–æ–º —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏—è —Å—Ç–æ—Ä–æ–Ω.

## üîß –°–æ–±—ã—Ç–∏—è

–ü—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –∏ —Ä–µ—Å–∞–π–∑–µ –æ–∫–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø—É—Å–∫–∞—é—Ç—Å—è —Å–æ–±—ã—Ç–∏—è —á–µ—Ä–µ–∑ –º–æ–¥—É–ª—å
`events`:

- `WIN_CLOSE` ‚Äì –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Å–æ–±—ã—Ç–∏—è –∑–∞–∫—Ä—ã—Ç–∏—è.
- `WIN_RESIZE` ‚Äì –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–æ–≤, –∞—Ä–≥—É–º–µ–Ω—Ç—ã `(width, height)`.
- `window_resized` ‚Äì —Å–æ–±—ã—Ç–∏–µ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å–º–µ–Ω–µ —Ä–∞–∑–º–µ—Ä–∞,
  –∞—Ä–≥—É–º–µ–Ω—Ç—ã `(width, height)`.
- `WIN_KEY` ‚Äì –Ω–∞–∂–∞—Ç–∏–µ –∏–ª–∏ –æ—Ç–ø—É—Å–∫–∞–Ω–∏–µ –∫–ª–∞–≤–∏—à–∏, –∞—Ä–≥—É–º–µ–Ω—Ç—ã `(key, down)`.
- `WIN_MOUSE` ‚Äì –¥–≤–∏–∂–µ–Ω–∏–µ –∏–ª–∏ –Ω–∞–∂–∞—Ç–∏–µ –º—ã—à–∏, `(type, x, y, button)`.

–°–æ–±—ã—Ç–∏—è –ø–æ–º–µ—â–∞—é—Ç—Å—è –≤–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω—é—é –æ—á–µ—Ä–µ–¥—å –∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –ø—Ä–∏ –≤—ã–∑–æ–≤–µ
`poll_events()`. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `events.dispatcher.on(WIN_CLOSE, handler)` —á—Ç–æ–±—ã
—Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –Ω–∏—Ö.

## üîπ –ü—Ä–∏–º–µ—Ä

```python
from sage_engine import window

window.init("My Game", 800, 600)
while not window.should_close():
    window.poll_events()
    # –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ, —Ä–µ–Ω–¥–µ—Ä
window.shutdown()
```


## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

`poll_events()` —É–∂–µ –≤–∫–ª—é—á–∞–µ—Ç –Ω–µ–±–æ–ª—å—à—É—é –∑–∞–¥–µ—Ä–∂–∫—É, –ø–æ—ç—Ç–æ–º—É –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–π –≤—ã–∑–æ–≤ —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –≤ —Ü–∏–∫–ª–µ –Ω–µ —Å–æ–∑–¥–∞—ë—Ç –∑–∞–º–µ—Ç–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä. –ï—Å–ª–∏ –æ–∫–Ω–æ –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `SAGE_HEADLESS=1` –ø–æ–∑–≤–æ–ª–∏—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç–∫–ª—é—á–∏—Ç—å –≥—Ä–∞—Ñ–∏–∫—É.

Backend –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞ `window.impl` (`win32`, `x11` –∏–ª–∏ `cocoa`), —á—Ç–æ —É–ø—Ä–æ—â–∞–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—ã—Ö —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–π.

### Windows Notes

–ù–∞ Windows –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –≤–µ—Ä—Å–∏–∏ Python 3.10‚Äì3.12. –ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º —É–±–µ–¥–∏—Ç–µ—Å—å,
—á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ Visual C++ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏. –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è
`SAGE_LOGLEVEL` –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–æ–≤ (`DEBUG`, `INFO`, `WARN`, `ERROR`).

## üîπ Platform-specific backends

–í –∫–∞—Ç–∞–ª–æ–≥–µ `window/impl` –Ω–∞—Ö–æ–¥—è—Ç—Å—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å–∏—Å—Ç–µ–º:

- `win32` ‚Äî –Ω–∞—Ç–∏–≤–Ω—ã–π Win32 API —á–µ—Ä–µ–∑ `ctypes`.
- `x11` ‚Äî —Ä–∞–±–æ—Ç–∞ —Å X11 –Ω–∞ Linux.
- `cocoa` ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Cocoa –Ω–∞ macOS.

–§—É–Ω–∫—Ü–∏—è `window.init` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–∏—Ä–∞–µ—Ç –Ω—É–∂–Ω—ã–π –∫–ª–∞—Å—Å –ø–æ `sys.platform`. –ü—Ä–∏
–æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –ø–æ–¥—Ö–æ–¥—è—â–µ–≥–æ backend –º–æ–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è
`SAGE_HEADLESS=1` —á—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π headless‚Äë—Ä–µ–∂–∏–º.

## üîπ Win32 backend

–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –æ–∫–Ω–∞ –Ω–∞ Windows —á–µ—Ä–µ–∑ `ctypes` –ø–æ—Å–ª–µ `CreateWindowEx` –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ
–≤—ã–∑–≤–∞—Ç—å `ShowWindow` –∏ `UpdateWindow`, –∏–Ω–∞—á–µ –æ–∫–Ω–æ –º–æ–∂–µ—Ç –Ω–µ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å—Å—è. –¶–∏–∫–ª
`poll_events()` –≤—ã–ø–æ–ª–Ω—è–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É —Å–æ–æ–±—â–µ–Ω–∏–π —á–µ—Ä–µ–∑ `PeekMessage`/`DispatchMessage`
–∏ —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–µ–±–æ–ª—å—à—É—é –∑–∞–¥–µ—Ä–∂–∫—É, —á—Ç–æ–±—ã –Ω–µ –∑–∞–≥—Ä—É–∂–∞—Ç—å CPU. –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ–∫–Ω–∞
–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–æ–±—ã—Ç–∏—è `WIN_CLOSE` –∏ `WIN_RESIZE` –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ `WM_CLOSE` –∏
`WM_SIZE` —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ.

### –ü—Ä–æ–≤–µ—Ä–∫–∞ Win32 –æ–∫–Ω–∞

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ `examples/render_test/main.py` –Ω–∞ Windows.
2. –ò–∑–º–µ–Ω–∏—Ç–µ —Ä–∞–∑–º–µ—Ä—ã –∏ –ø–µ—Ä–µ–º–µ—â–∞–π—Ç–µ –æ–∫–Ω–æ ‚Äì –≤ –∫–æ–Ω—Å–æ–ª—å –±—É–¥—É—Ç –ø–µ—á–∞—Ç–∞—Ç—å—Å—è —Å–æ–±—ã—Ç–∏—è
   `WIN_RESIZE` –∏ `WIN_MOUSE`.
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–ª–∞–≥–∏ `resizable`, `borderless` –∏ `fullscreen` –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏.
   –í —Ä–µ–∂–∏–º–∞—Ö `borderless` –∏ `fullscreen` —Ä–∞–º–∫–∞ –æ–∫–Ω–∞ –∏—Å—á–µ–∑–∞–µ—Ç, –∞ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ
   —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –ø–æ –≤–µ—Ä—Ö–Ω–µ–π –ø–æ–ª–æ—Å–µ.

## –ê–≤—Ç–æ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏—Ö –º–æ–¥—É–ª–µ–π

`window.get_framebuffer_size()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã –±—É—Ñ–µ—Ä–∞ –¥–ª—è –≤—ã–≤–æ–¥–∞.
–ú–æ–¥—É–ª—å `gfx` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —ç—Ç—É —Ñ—É–Ω–∫—Ü–∏—é –ø—Ä–∏ –∫–∞–∂–¥–æ–º `begin_frame()` —á—Ç–æ–±—ã –ø—Ä–∏
–∏–∑–º–µ–Ω–µ–Ω–∏–∏ –æ–∫–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π framebuffer.
–ö—Ä–æ–º–µ —Ç–æ–≥–æ, –º–æ–¥—É–ª—å `window` –∏—Å–ø—É—Å–∫–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ `window_resized` —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ
–∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–æ–≤, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç `gfx` –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –±—É—Ñ–µ—Ä, –Ω–µ
–¥–æ–∂–∏–¥–∞—è—Å—å —Å–ª–µ–¥—É—é—â–µ–≥–æ –∫–∞–¥—Ä–∞.
