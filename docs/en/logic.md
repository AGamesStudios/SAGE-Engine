# Logic and Scripting

Scenes use an event system where **conditions** trigger **actions**.  Variables
live on ``engine.events.variables`` and may be referenced inside events using the
``$name`` shorthand or ``engine.variable('name')``.  Additional actions and
conditions can be registered via plugins.

When running events concurrently, pass a ``VariableStore`` instance to
``EventSystem`` so variable access is guarded by a lock:

```python
from sage_engine.logic.base import VariableStore, EventSystem
es = EventSystem(variables=VariableStore())
```
Variables can be marked as private when set with ``SetVariable`` or
``SetObjectVariable``. Private variables are excluded when a scene aggregates
object variables into the main event system.

Actions are just callable objects with an ``execute`` method.  The built-in
actions are implemented as simple functions, making it easy to create new ones
for custom behaviour.

## Built-in helpers

* ``SetVariable`` / ``ModifyVariable`` store numeric values.
* ``SetObjectVariable`` / ``ModifyObjectVariable`` store data on objects.
* ``EvalExpr`` evaluates a Python expression as a condition.
* ``CallFunction`` calls any Python function when triggered.
* ``InputAxis`` checks an analog input axis against a threshold.

Values can reference engine attributes or variables using ``engine.attr`` or
``$var`` syntax.  Lists and dictionaries are resolved recursively so complex
parameters may contain references.

Logic can also be loaded from ``.sagelogic`` files or generated by scripts listed
under ``logic_scripts`` when loading a scene. ``.sagelogic`` files support ``#``
or ``//`` comments and trailing commas for readability.
