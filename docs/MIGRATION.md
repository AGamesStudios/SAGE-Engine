# MIGRATION — переход на плагин‑первый подход

Цель: ядро остаётся **чистым**, всё остальное переносится в плагины.

## Шаги

1. **Бэкап проекта.**
2. Удалить жёсткие импорты сцен/камер/рендеров из `main.py` и ядра.
3. Перенести код сцен/камер/рендеров в плагины:
   - `plugins/sage2d` — 2D мир+камера+рендер
   - `plugins/sage3d` — 3D мир+камера+рендер
   - `plugins/sageui` — UI-системы
   - `plugins/sageinput` — хоткеи/инпут
   - `plugins/sagescripts` — загрузка пользовательских скриптов
4. В `main.py` запрашивать сервисы у плагинов:
   - `renderer_factory` / `world_factory` / `camera_factory`
5. Проверить запуск с `--profile`/`--enable`/`--disable`/`--render`.
6. Постепенно переносить всё «встроенное» (physics, audio, assets) в плагинные модули.

## Совместимость `PluginManager`
Если ваша версия без `config`, используйте совместимый `main.py` (см. репозиторий), который «подстраивается» под старый интерфейс.

## Типичные проблемы
- **Импорт по относительным путям** в плагинах (решение — `_load_local()` по абсолютному пути).
- Нет `renderer_factory` → ядро включает `NullRenderer` (пустой экран). Подключите рендер‑плагин.
- Конфликты хоткеев/команд — разделяйте по namespace (`ui.*`, `input.*`, `scripts.*`).
